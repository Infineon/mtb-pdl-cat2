<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAT2 Peripheral Driver Library: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAT2 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__sysclk__ilo__funcs.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="group__group__sysclk.html">SysClk       (System Clock)</a> &raquo; <a class="el" href="group__group__sysclk__ilo.html">Internal Low-Speed Oscillator (ILO)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaabb2612adc103562da7d6dc451a33caa"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#gaabb2612adc103562da7d6dc451a33caa">Cy_SysClk_IloEnable</a> (void)</td></tr>
<tr class="memdesc:gaabb2612adc103562da7d6dc451a33caa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the ILO.  <a href="#gaabb2612adc103562da7d6dc451a33caa">More...</a><br /></td></tr>
<tr class="separator:gaabb2612adc103562da7d6dc451a33caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga544c284171c68dc5ef48bd24d2575952"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#ga544c284171c68dc5ef48bd24d2575952">Cy_SysClk_IloIsEnabled</a> (void)</td></tr>
<tr class="memdesc:ga544c284171c68dc5ef48bd24d2575952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ILO enable/disable state.  <a href="#ga544c284171c68dc5ef48bd24d2575952">More...</a><br /></td></tr>
<tr class="separator:ga544c284171c68dc5ef48bd24d2575952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc9d037c4d20e66f03f89f51596d4a55"><td class="memItemLeft" align="right" valign="top">__STATIC_INLINE <a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#gacc9d037c4d20e66f03f89f51596d4a55">Cy_SysClk_IloDisable</a> (void)</td></tr>
<tr class="memdesc:gacc9d037c4d20e66f03f89f51596d4a55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the ILO.  <a href="#gacc9d037c4d20e66f03f89f51596d4a55">More...</a><br /></td></tr>
<tr class="separator:gacc9d037c4d20e66f03f89f51596d4a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84ab8632f6ca5c941e170aa40ff402e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement</a> (void)</td></tr>
<tr class="memdesc:ga84ab8632f6ca5c941e170aa40ff402e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the DFT hardware to perform the ILO accuracy measurement.  <a href="#ga84ab8632f6ca5c941e170aa40ff402e4">More...</a><br /></td></tr>
<tr class="separator:ga84ab8632f6ca5c941e170aa40ff402e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a20a6f49379cd9baf1c0bf11bd5abd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#ga4a20a6f49379cd9baf1c0bf11bd5abd7">Cy_SysClk_IloStopMeasurement</a> (void)</td></tr>
<tr class="memdesc:ga4a20a6f49379cd9baf1c0bf11bd5abd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans the DFT hardware registers, returning it to the default state.  <a href="#ga4a20a6f49379cd9baf1c0bf11bd5abd7">More...</a><br /></td></tr>
<tr class="separator:ga4a20a6f49379cd9baf1c0bf11bd5abd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17cc56e4b20c8a43076b3a544affb6a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate</a> (uint32_t desiredDelay, uint32_t *compensatedCycles)</td></tr>
<tr class="memdesc:ga17cc56e4b20c8a43076b3a544affb6a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measures the current ILO accuracy.  <a href="#ga17cc56e4b20c8a43076b3a544affb6a4">More...</a><br /></td></tr>
<tr class="separator:ga17cc56e4b20c8a43076b3a544affb6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaabb2612adc103562da7d6dc451a33caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabb2612adc103562da7d6dc451a33caa">&#9670;&nbsp;</a></span>Cy_SysClk_IloEnable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE void Cy_SysClk_IloEnable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables the ILO. </p>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line">    <span class="comment">/* Scenario: The WDC timers needs to be sourced by the ILO instead of the WCO.</span></div><div class="line"><span class="comment">     */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Enable the ILO */</span></div><div class="line">    <a class="code" href="group__group__sysclk__ilo__funcs.html#gaabb2612adc103562da7d6dc451a33caa">Cy_SysClk_IloEnable</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Now switch the WDC timers clocking to ILO */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Disable the WCO */</span></div><div class="line">    <a class="code" href="group__group__sysclk__wco__funcs.html#ga855b936e5f17dc77abd2c44ec0660e2a">Cy_SysClk_WcoDisable</a>();</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="ga544c284171c68dc5ef48bd24d2575952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga544c284171c68dc5ef48bd24d2575952">&#9670;&nbsp;</a></span>Cy_SysClk_IloIsEnabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE bool Cy_SysClk_IloIsEnabled </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the ILO enable/disable state. </p>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line">    <span class="comment">/* Scenario: ILO is not needed and should be shut down to reduce power consumption. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__sysclk__ilo__funcs.html#ga544c284171c68dc5ef48bd24d2575952">Cy_SysClk_IloIsEnabled</a>())</div><div class="line">    {</div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#gacc9d037c4d20e66f03f89f51596d4a55">Cy_SysClk_IloDisable</a>(); <span class="comment">/* Disable the ILO */</span></div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="gacc9d037c4d20e66f03f89f51596d4a55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc9d037c4d20e66f03f89f51596d4a55">&#9670;&nbsp;</a></span>Cy_SysClk_IloDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__STATIC_INLINE <a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a> Cy_SysClk_IloDisable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the ILO. </p>
<p>ILO can't be disabled if WDT is enabled.</p>
<dl class="section return"><dt>Returns</dt><dd>Error / status code, <a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a> : <br />
<a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a> - ILO successfully disabled <br />
<a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3ac8d3c0b2eddff6ca1748b592a22e92cd">CY_SYSCLK_INVALID_STATE</a> - Cannot disable the ILO if the WDT is enabled.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Do not call this function if the WDT is enabled, because the WDT is clocked by the ILO.</dd></dl>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line">    <span class="comment">/* Scenario: ILO is not needed and should be shut down to reduce power consumption. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__sysclk__ilo__funcs.html#ga544c284171c68dc5ef48bd24d2575952">Cy_SysClk_IloIsEnabled</a>())</div><div class="line">    {</div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#gacc9d037c4d20e66f03f89f51596d4a55">Cy_SysClk_IloDisable</a>(); <span class="comment">/* Disable the ILO */</span></div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="ga84ab8632f6ca5c941e170aa40ff402e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84ab8632f6ca5c941e170aa40ff402e4">&#9670;&nbsp;</a></span>Cy_SysClk_IloStartMeasurement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cy_SysClk_IloStartMeasurement </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares the DFT hardware to perform the ILO accuracy measurement. </p>
<p>This function is non-blocking and needs to be called before using the <a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate()</a> function.</p>
<p>This function configures measurement counters to be sourced by SysClk (Counter 1) and ILO (Counter 2).</p>
<dl class="section note"><dt>Note</dt><dd>SysClk should be clocked by IMO, otherwise <a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4" title="Measures the current ILO accuracy. ">Cy_SysClk_IloCompensate()</a> function can give incorrect results.</dd></dl>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> Wdt_Isr(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga727d9ae6fdba36809bf631985a3eb987">Cy_WDT_ClearInterrupt</a>();</div><div class="line">    flag = <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Configure and enable the WDT interrupt in the application code */</span></div><div class="line">    <a class="code" href="structcy__stc__sysint__t.html">cy_stc_sysint_t</a> Wdt_IrqCfg =</div><div class="line">    {</div><div class="line">        .<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>         = srss_interrupt_wdt_IRQn,   <span class="comment">/* The interrupt source is the WDT interrupt */</span></div><div class="line">        .intrPriority    = 3UL                        <span class="comment">/* The interrupt priority is 3 */</span></div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">/* Configure the interrupt with a vector at Wdt_Isr(). */</span></div><div class="line">    <a class="code" href="group__group__sysint__enums.html#ga01619b224f9d5c23915e51783ea184c8">cy_en_sysint_status_t</a> sysintStatus = <a class="code" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>(&amp;Wdt_IrqCfg, Wdt_Isr);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__sysint__enums.html#gga01619b224f9d5c23915e51783ea184c8af7db469e7f8cd5cb7917d1324005eb89">CY_SYSINT_SUCCESS</a> != sysintStatus)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Insert the error handling here */</span></div><div class="line">    }</div><div class="line"></div><div class="line">    NVIC_EnableIRQ(Wdt_IrqCfg.<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>); <span class="comment">/* Enable the interrupt. */</span></div><div class="line"></div><div class="line">    <a class="code" href="group__group__wdt__functions.html#gaac6f64babfb1855f9ba8aecccc19ecb4">Cy_WDT_Init</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga82aec7e454d05d03dfd1d6fd5e573d5e">Cy_WDT_Enable</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga38c69c98675d6024a7d73acb41b24399">Cy_WDT_UnmaskInterrupt</a>();</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Then somewhere in the main loop: */</span></div><div class="line">    uint32_t iloCycles = 0UL;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (flag)</div><div class="line">    {</div><div class="line">        flag = <span class="keyword">false</span>;</div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement</a>();</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a> != <a class="code" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate</a>(500000, &amp;iloCycles)); <span class="comment">/* The desired WDT delay is 0.5 second */</span></div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga4a20a6f49379cd9baf1c0bf11bd5abd7">Cy_SysClk_IloStopMeasurement</a>(); <span class="comment">/* Finish the procedure */</span></div><div class="line">        <a class="code" href="group__group__wdt__functions.html#ga1e707a8236e6dcd90eede7e726a2648f">Cy_WDT_SetMatch</a>((uint16_t)(iloCycles + <a class="code" href="group__group__wdt__functions.html#ga77552627bbcbe8ded86f52b67f5f12b3">Cy_WDT_GetMatch</a>())); <span class="comment">/* Program the next WDT event */</span></div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="ga4a20a6f49379cd9baf1c0bf11bd5abd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a20a6f49379cd9baf1c0bf11bd5abd7">&#9670;&nbsp;</a></span>Cy_SysClk_IloStopMeasurement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cy_SysClk_IloStopMeasurement </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans the DFT hardware registers, returning it to the default state. </p>
<p>Calling this function immediately stops the the ILO frequency measurement. Call this function before placing the device to deepsleep, if <a class="el" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement()</a> API was called before.</p>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> Wdt_Isr(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga727d9ae6fdba36809bf631985a3eb987">Cy_WDT_ClearInterrupt</a>();</div><div class="line">    flag = <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Configure and enable the WDT interrupt in the application code */</span></div><div class="line">    <a class="code" href="structcy__stc__sysint__t.html">cy_stc_sysint_t</a> Wdt_IrqCfg =</div><div class="line">    {</div><div class="line">        .<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>         = srss_interrupt_wdt_IRQn,   <span class="comment">/* The interrupt source is the WDT interrupt */</span></div><div class="line">        .intrPriority    = 3UL                        <span class="comment">/* The interrupt priority is 3 */</span></div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">/* Configure the interrupt with a vector at Wdt_Isr(). */</span></div><div class="line">    <a class="code" href="group__group__sysint__enums.html#ga01619b224f9d5c23915e51783ea184c8">cy_en_sysint_status_t</a> sysintStatus = <a class="code" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>(&amp;Wdt_IrqCfg, Wdt_Isr);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__sysint__enums.html#gga01619b224f9d5c23915e51783ea184c8af7db469e7f8cd5cb7917d1324005eb89">CY_SYSINT_SUCCESS</a> != sysintStatus)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Insert the error handling here */</span></div><div class="line">    }</div><div class="line"></div><div class="line">    NVIC_EnableIRQ(Wdt_IrqCfg.<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>); <span class="comment">/* Enable the interrupt. */</span></div><div class="line"></div><div class="line">    <a class="code" href="group__group__wdt__functions.html#gaac6f64babfb1855f9ba8aecccc19ecb4">Cy_WDT_Init</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga82aec7e454d05d03dfd1d6fd5e573d5e">Cy_WDT_Enable</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga38c69c98675d6024a7d73acb41b24399">Cy_WDT_UnmaskInterrupt</a>();</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Then somewhere in the main loop: */</span></div><div class="line">    uint32_t iloCycles = 0UL;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (flag)</div><div class="line">    {</div><div class="line">        flag = <span class="keyword">false</span>;</div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement</a>();</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a> != <a class="code" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate</a>(500000, &amp;iloCycles)); <span class="comment">/* The desired WDT delay is 0.5 second */</span></div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga4a20a6f49379cd9baf1c0bf11bd5abd7">Cy_SysClk_IloStopMeasurement</a>(); <span class="comment">/* Finish the procedure */</span></div><div class="line">        <a class="code" href="group__group__wdt__functions.html#ga1e707a8236e6dcd90eede7e726a2648f">Cy_WDT_SetMatch</a>((uint16_t)(iloCycles + <a class="code" href="group__group__wdt__functions.html#ga77552627bbcbe8ded86f52b67f5f12b3">Cy_WDT_GetMatch</a>())); <span class="comment">/* Program the next WDT event */</span></div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="ga17cc56e4b20c8a43076b3a544affb6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17cc56e4b20c8a43076b3a544affb6a4">&#9670;&nbsp;</a></span>Cy_SysClk_IloCompensate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a> Cy_SysClk_IloCompensate </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desiredDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>compensatedCycles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measures the current ILO accuracy. </p>
<p>Basing on the measured frequency the required number of ILO cycles for a given delay (in microseconds) is obtained. The desired delay that needs to be compensated is passed through the desiredDelay parameter. The compensated cycle count is returned through the compesatedCycles pointer. The compensated ILO cycles can then be used to define the WDT period value, effectively compensating for the ILO inaccuracy and allowing a more accurate WDT interrupt generation. This function starts timers, and if they are already running, their status is checked. If the timer has reached 0, then it is considered that it has already measured and calculated, how many cycles are needed for DesiredDelay and returns "success". The Cy_SysClk_IloCompensate function execution time is always ~ 1ms.</p>
<p><a class="el" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement()</a> function should be called prior to calling this function.</p>
<dl class="section note"><dt>Note</dt><dd>SysClk should be clocked by IMO, otherwise the <a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4" title="Measures the current ILO accuracy. ">Cy_SysClk_IloCompensate()</a> function can give incorrect results.</dd>
<dd>
If the System clock frequency is changed in runtime, the <a class="el" href="group__group__system__config__system__functions.html#gae0c36a9591fe6e9c45ecb21a794f0f0f">SystemCoreClockUpdate()</a> should be called before calling a next <a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4" title="Measures the current ILO accuracy. ">Cy_SysClk_IloCompensate()</a>.</dd>
<dd>
For a correct WDT or DeepSleep Timers functioning with ILO compensating the <a class="el" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate()</a> should be called before WDT or DeepSleep Timers enabling.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not enter Deep Sleep mode until the function returns CY_SYSCLK_SUCCESS.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desiredDelay</td><td>Required delay in microseconds. Valid range is 100 ... 2 000 000 us.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The desiredDelay range 100..2000000 is mathematically possible, but:<br />
Physically, the longest WDT period is 65536 * ILO clock period,<br />
which is nominally 25us, so the real maximum desiredDelay is 1.63s @40kHz ILO.<br />
The 100us is about a four ILO clocks, so such a small desiredDelay may be imprecise (~25% of error or even more).<br />
Therefore, the range 1ms..1s (1000...1000000) is recommended as practically applicable.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*compensatedCycles</td><td>The pointer to the variable in which the required number of ILO cycles for the given delay will be returned.</td></tr>
  </table>
  </dd>
</dl>
<p>The value returned in *compensatedCycles pointer is not valid until the function returns CY_SYSCLK_SUCCESS.</p>
<dl class="section return"><dt>Returns</dt><dd>The status <a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a><ul>
<li><a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a> - The compensation process is complete and the compensated cycles value is returned in the compensatedCycles pointer.</li>
<li><a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a2cdb3390464a5b757b57887899bd5946">CY_SYSCLK_BAD_PARAM</a> - One or more invalid parameters</li>
<li><a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a5aa9e06cb28b23ed378e86933bdeda94">CY_SYSCLK_STARTED</a> - Indicates measurement is in progress. It is strongly recommended to do not make pauses between API calling. The function should be called repeatedly until the API returns CY_SYSCLK_SUCCESS.</li>
<li><a class="el" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3ac8d3c0b2eddff6ca1748b592a22e92cd">CY_SYSCLK_INVALID_STATE</a> - Indicates that measurement not started. The user should call <a class="el" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement()</a> API before calling this function.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> Wdt_Isr(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga727d9ae6fdba36809bf631985a3eb987">Cy_WDT_ClearInterrupt</a>();</div><div class="line">    flag = <span class="keyword">true</span>;</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Configure and enable the WDT interrupt in the application code */</span></div><div class="line">    <a class="code" href="structcy__stc__sysint__t.html">cy_stc_sysint_t</a> Wdt_IrqCfg =</div><div class="line">    {</div><div class="line">        .<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>         = srss_interrupt_wdt_IRQn,   <span class="comment">/* The interrupt source is the WDT interrupt */</span></div><div class="line">        .intrPriority    = 3UL                        <span class="comment">/* The interrupt priority is 3 */</span></div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="comment">/* Configure the interrupt with a vector at Wdt_Isr(). */</span></div><div class="line">    <a class="code" href="group__group__sysint__enums.html#ga01619b224f9d5c23915e51783ea184c8">cy_en_sysint_status_t</a> sysintStatus = <a class="code" href="group__group__sysint__functions.html#gab2ff6820a898e9af3f780000054eea5d">Cy_SysInt_Init</a>(&amp;Wdt_IrqCfg, Wdt_Isr);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__group__sysint__enums.html#gga01619b224f9d5c23915e51783ea184c8af7db469e7f8cd5cb7917d1324005eb89">CY_SYSINT_SUCCESS</a> != sysintStatus)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Insert the error handling here */</span></div><div class="line">    }</div><div class="line"></div><div class="line">    NVIC_EnableIRQ(Wdt_IrqCfg.<a class="code" href="structcy__stc__sysint__t.html#a6da08d81da65a7f93d3e4c46a4b8d950">intrSrc</a>); <span class="comment">/* Enable the interrupt. */</span></div><div class="line"></div><div class="line">    <a class="code" href="group__group__wdt__functions.html#gaac6f64babfb1855f9ba8aecccc19ecb4">Cy_WDT_Init</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga82aec7e454d05d03dfd1d6fd5e573d5e">Cy_WDT_Enable</a>();</div><div class="line">    <a class="code" href="group__group__wdt__functions.html#ga38c69c98675d6024a7d73acb41b24399">Cy_WDT_UnmaskInterrupt</a>();</div></div><!-- fragment --><div class="fragment"><div class="line">    <span class="comment">/* Scenario: Then somewhere in the main loop: */</span></div><div class="line">    uint32_t iloCycles = 0UL;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (flag)</div><div class="line">    {</div><div class="line">        flag = <span class="keyword">false</span>;</div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga84ab8632f6ca5c941e170aa40ff402e4">Cy_SysClk_IloStartMeasurement</a>();</div><div class="line">        <span class="keywordflow">while</span> (<a class="code" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a> != <a class="code" href="group__group__sysclk__ilo__funcs.html#ga17cc56e4b20c8a43076b3a544affb6a4">Cy_SysClk_IloCompensate</a>(500000, &amp;iloCycles)); <span class="comment">/* The desired WDT delay is 0.5 second */</span></div><div class="line">        <a class="code" href="group__group__sysclk__ilo__funcs.html#ga4a20a6f49379cd9baf1c0bf11bd5abd7">Cy_SysClk_IloStopMeasurement</a>(); <span class="comment">/* Finish the procedure */</span></div><div class="line">        <a class="code" href="group__group__wdt__functions.html#ga1e707a8236e6dcd90eede7e726a2648f">Cy_WDT_SetMatch</a>((uint16_t)(iloCycles + <a class="code" href="group__group__wdt__functions.html#ga77552627bbcbe8ded86f52b67f5f12b3">Cy_WDT_GetMatch</a>())); <span class="comment">/* Program the next WDT event */</span></div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>CAT2 Peripheral Driver Library</b> by <b>Infineon Technologies</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
