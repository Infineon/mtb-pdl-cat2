<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAT2 Peripheral Driver Library: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAT2 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__sysclk__calclk__funcs.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="group__group__sysclk.html">SysClk       (System Clock)</a> &raquo; <a class="el" href="group__group__sysclk__calclk.html">Clock Calibration</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4ff12088d4b5fe0c9d31dfb7af35ea1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__calclk__funcs.html#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">Cy_SysClk_CalibStart</a> (<a class="el" href="group__group__sysclk__calclk__enums.html#ga2cc68848e0c27f0d74f6d5919eac7b3b">cy_en_meas_clks_t</a> clock1, uint16_t count1, <a class="el" href="group__group__sysclk__calclk__enums.html#ga2cc68848e0c27f0d74f6d5919eac7b3b">cy_en_meas_clks_t</a> clock2)</td></tr>
<tr class="memdesc:ga4ff12088d4b5fe0c9d31dfb7af35ea1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns clocks to the clock measurement counters, and starts counting.  <a href="#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">More...</a><br /></td></tr>
<tr class="separator:ga4ff12088d4b5fe0c9d31dfb7af35ea1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22da29faab694eb9d474159e7e27d85d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__calclk__funcs.html#ga22da29faab694eb9d474159e7e27d85d">Cy_SysClk_CalibGetFreq</a> (bool measuredClock, uint16_t count1)</td></tr>
<tr class="memdesc:ga22da29faab694eb9d474159e7e27d85d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the frequency of the indicated measured clock (clock1 or clock2).  <a href="#ga22da29faab694eb9d474159e7e27d85d">More...</a><br /></td></tr>
<tr class="separator:ga22da29faab694eb9d474159e7e27d85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd0a7ee1650bb28c9b16e9ea0310b593"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__calclk__funcs.html#gadd0a7ee1650bb28c9b16e9ea0310b593">Cy_SysClk_CalibDone</a> (void)</td></tr>
<tr class="memdesc:gadd0a7ee1650bb28c9b16e9ea0310b593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if clock measurement counting is done, that is, counter1 has counted down to zero.  <a href="#gadd0a7ee1650bb28c9b16e9ea0310b593">More...</a><br /></td></tr>
<tr class="separator:gadd0a7ee1650bb28c9b16e9ea0310b593"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4ff12088d4b5fe0c9d31dfb7af35ea1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">&#9670;&nbsp;</a></span>Cy_SysClk_CalibStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__sysclk__returns.html#gad6699a184e2e3c01433251b0981558f3">cy_en_sysclk_status_t</a> Cy_SysClk_CalibStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group__sysclk__calclk__enums.html#ga2cc68848e0c27f0d74f6d5919eac7b3b">cy_en_meas_clks_t</a>&#160;</td>
          <td class="paramname"><em>clock1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>count1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__sysclk__calclk__enums.html#ga2cc68848e0c27f0d74f6d5919eac7b3b">cy_en_meas_clks_t</a>&#160;</td>
          <td class="paramname"><em>clock2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns clocks to the clock measurement counters, and starts counting. </p>
<p>The counters let you measure a clock frequency using another clock as a reference. There are two counters.</p>
<ul>
<li>One counter (counter1), which is clocked by clock1, is loaded with an initial value and counts down to zero.</li>
<li>The second counter (counter2), which is clocked by clock2, counts up until the first counter reaches zero.</li>
</ul>
<p>Either clock1 or clock2 can be a reference clock; the other clock becomes the measured clock. The reference clock frequency is always known. <br />
After calling this function, call <a class="el" href="group__group__sysclk__calclk__funcs.html#gadd0a7ee1650bb28c9b16e9ea0310b593">Cy_SysClk_CalibDone()</a> to determine when counting is done; that is, counter1 has counted down to zero. Then call <a class="el" href="group__group__sysclk__calclk__funcs.html#ga22da29faab694eb9d474159e7e27d85d">Cy_SysClk_CalibGetFreq()</a> to calculate the frequency of the measured clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock1</td><td>The clock for counter1</td></tr>
    <tr><td class="paramname">count1</td><td>The initial value for counter1, from which counter1 counts down to zero.</td></tr>
    <tr><td class="paramname">clock2</td><td>The clock for counter2</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error / status code: <br />
CY_SYSCLK_INVALID_STATE if already doing a measurement <br />
CY_SYSCLK_BAD_PARAM if invalid clock input parameter. Source have zero frequency. Or overflow expected <br />
else CY_SYSCLK_SUCCESS</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The counters are both 16-bit, so the maximum value of count1 is 0xFFFF. If clock2 frequency is greater than clock1, make sure that count1 is low enough that counter2 does not overflow before counter1 reaches zero. </dd>
<dd>
The time to complete a measurement is count1 / clock1 frequency. </dd>
<dd>
The clocks for both counters must have a nonzero frequency, or <a class="el" href="group__group__sysclk__calclk__funcs.html#ga22da29faab694eb9d474159e7e27d85d">Cy_SysClk_CalibGetFreq()</a> incorrectly reports the result of the previous measurement. </dd>
<dd>
Both clock1 and clock2 clocks must be running or the measurement will not complete. </dd>
<dd>
Due to internal clock synchronization count1 should be at least 5 times the 1/frequency2. </dd>
<dd>
Do not enter a device low power mode (Sleep, Deep Sleep) while doing a measurement; the measured clock frequency may not be accurate. </dd>
<dd>
The calibration counters are available only in Active/Sleep modes. Counter values are not retained and will be in default state after wakeup from deepsleep.</dd></dl>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line">    <span class="comment">/* set clock1 (time window) as HPOSC</span></div><div class="line"><span class="comment">     * set clock2 (low frequency) as ILO</span></div><div class="line"><span class="comment">     * set time window as 0xFFFF counts of the HPOSC</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    retVal = <a class="code" href="group__group__sysclk__calclk__funcs.html#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">Cy_SysClk_CalibStart</a>(<a class="code" href="group__group__sysclk__calclk__enums.html#gga2cc68848e0c27f0d74f6d5919eac7b3bab5f07558ad66f1c51afec24d0aab12f6">CY_SYSCLK_MEAS_CLK_HPOSC</a>, 0xFFFFUL, <a class="code" href="group__group__sysclk__calclk__enums.html#gga2cc68848e0c27f0d74f6d5919eac7b3ba1c7b654f341780dddb336d9f21d70e71">CY_SYSCLK_MEAS_CLK_ILO</a>);</div><div class="line">    <span class="keywordflow">if</span> (retVal == <a class="code" href="group__group__sysclk__returns.html#ggad6699a184e2e3c01433251b0981558f3a1563f761f963757b339ff05eb5a690ec">CY_SYSCLK_SUCCESS</a>)</div><div class="line">    {</div><div class="line">        <span class="comment">/* get real ILO frequency */</span></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * measured clock is clock2 = true,</span></div><div class="line"><span class="comment">         * time window was 0xFFFF counts of the clock1</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        frequency = <a class="code" href="group__group__sysclk__calclk__funcs.html#ga22da29faab694eb9d474159e7e27d85d">Cy_SysClk_CalibGetFreq</a>(<span class="keyword">true</span>, 0xFFFF);</div><div class="line">    }</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="ga22da29faab694eb9d474159e7e27d85d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22da29faab694eb9d474159e7e27d85d">&#9670;&nbsp;</a></span>Cy_SysClk_CalibGetFreq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Cy_SysClk_CalibGetFreq </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>measuredClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>count1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the frequency of the indicated measured clock (clock1 or clock2). </p>
<ul>
<li>If clock1 is the measured clock, its frequency is: clock1 frequency = (count1 / count2) * clock2 frequency</li>
<li>If clock2 is the measured clock, its frequency is: clock2 frequency = (count2 / count1) * clock1 frequency</li>
</ul>
<p>Call this function only after counting is done; see <a class="el" href="group__group__sysclk__calclk__funcs.html#gadd0a7ee1650bb28c9b16e9ea0310b593">Cy_SysClk_CalibDone()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measuredClock</td><td>False (0) if the measured clock is clock1; true (1) if the measured clock is clock2.</td></tr>
    <tr><td class="paramname">count1</td><td>The initial value for counter1, from which counter1 counts down to zero. See <a class="el" href="group__group__sysclk__calclk__funcs.html#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">Cy_SysClk_CalibStart()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The frequency of the measured clock, in Hz. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The function returns zero, if during measurement device was in the Deep Sleep or partially blocking flash operation occurred. It means that current measurement is not valid and you should call the <a class="el" href="group__group__sysclk__calclk__funcs.html#ga4ff12088d4b5fe0c9d31dfb7af35ea1a" title="Assigns clocks to the clock measurement counters, and starts counting. ">Cy_SysClk_CalibStart()</a> function once again.</dd></dl>
<dl class="section user"><dt>Function Usage</dt><dd><div class="fragment"><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">         * measured clock is clock2 = true,</span></div><div class="line"><span class="comment">         * time window was 0xFFFF counts of the clock1</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        frequency = <a class="code" href="group__group__sysclk__calclk__funcs.html#ga22da29faab694eb9d474159e7e27d85d">Cy_SysClk_CalibGetFreq</a>(<span class="keyword">true</span>, 0xFFFF);</div></div><!-- fragment --></dd></dl>

</div>
</div>
<a id="gadd0a7ee1650bb28c9b16e9ea0310b593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd0a7ee1650bb28c9b16e9ea0310b593">&#9670;&nbsp;</a></span>Cy_SysClk_CalibDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Cy_SysClk_CalibDone </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if clock measurement counting is done, that is, counter1 has counted down to zero. </p>
<p>Call <a class="el" href="group__group__sysclk__calclk__funcs.html#ga4ff12088d4b5fe0c9d31dfb7af35ea1a">Cy_SysClk_CalibStart()</a> before calling this function.</p>
<dl class="section return"><dt>Returns</dt><dd>Status of calibration counters: <br />
true = done <br />
false = in progress </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>CAT2 Peripheral Driver Library</b> by <b>Infineon Technologies</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
