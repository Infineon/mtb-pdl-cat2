<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAT2 Peripheral Driver Library: LPCOMP       (Low Power Comparator)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAT2 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__lpcomp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">LPCOMP (Low Power Comparator)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>Provides access to the low-power comparators implemented using the fixed-function low-power comparator block. </p>
<p>The functions and other declarations used in this driver are in cy_lpcomp.h. You can include cy_pdl.h to get access to all the functions and declarations in the PDL.</p>
<p>These comparators can perform fast analog signal comparison of external analog signals in all system power modes. The low-power comparator output can be inspected by the CPU, used as an interrupt/wakeup source to the CPU when in Low-power mode (Sleep or Deep Sleep) or fed to DSI as an asynchronous or synchronous signal (level or pulse).</p>
<h1><a class="anchor" id="group_lpcomp_section_Configuration_Considerations"></a>
Configuration Considerations</h1>
<p>To set up a comparator, configure the inputs, output, mode, interrupts, and other configuration parameters.</p>
<p>1) Configure the inputs and the output using the GPIO API. The high-impedance Analog drive mode is for the inputs and Strong drive mode is for the output.</p>
<p>a. Connecting inputs using dedicated pins: </p><div class="fragment"><div class="line">        <span class="comment">/* Positive input (inp) to the P0[0] */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 0, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_GPIO);</div><div class="line"></div><div class="line">        <span class="comment">/* Negative input (inn) to the P0[1] */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 1, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_GPIO);</div><div class="line"></div><div class="line">        <span class="comment">/* Compare Output (comp) to the P2[7] */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT2, 7, <a class="code" href="group__group__gpio__drive_modes.html#gacebd8bea6222d742bdfbfd86dabab940">CY_GPIO_DM_STRONG_IN_OFF</a>, 0, HSIOM_SEL_GPIO);</div></div><!-- fragment --><p> b. Connecting low-power comparator's inputs using AMUXBUS: </p><div class="fragment"><div class="line">        <span class="comment">/* LPCOMP_0: positive input (inp): connect P0[0] to AMUXBUSA */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 0, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_AMUXA);</div><div class="line">        <span class="comment">/* LPCOMP_0: negative input (inn): connect P0[1] to AMUXBUSB */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 1, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_AMUXB);</div><div class="line">        <span class="comment">/* LPCOMP_0: compare Output (comp) to the P2[7] */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT2, 7, <a class="code" href="group__group__gpio__drive_modes.html#gacebd8bea6222d742bdfbfd86dabab940">CY_GPIO_DM_STRONG_IN_OFF</a>, 0, HSIOM_SEL_GPIO);</div><div class="line"></div><div class="line">        <span class="comment">/* LPCOMP_1: positive input (inp): connect P0[2] to AMUXBUSA */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 2, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_AMUXA);</div><div class="line">        <span class="comment">/* LPCOMP_1: negative input (inn): connect P0[3] to AMUXBUSB */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 3, <a class="code" href="group__group__gpio__drive_modes.html#gabb81a7da2a4cd1ed6501515f9b6950e8">CY_GPIO_DM_ANALOG</a>, 0, HSIOM_SEL_AMUXB);</div><div class="line">        <span class="comment">/* LPCOMP_1: compare Output (comp) to the P3[7] */</span></div><div class="line">        <a class="code" href="group__group__gpio__functions__init.html#gac0c0ed22816c4bcedfb642202f91ba72">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT3, 7, <a class="code" href="group__group__gpio__drive_modes.html#gacebd8bea6222d742bdfbfd86dabab940">CY_GPIO_DM_STRONG_IN_OFF</a>, 0, HSIOM_SEL_GPIO);</div><div class="line"></div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The pins assignment is for the PSoC 4100S Plus (CY8CKIT-149). The pin numbers may differ, please refer to the device documentation for the more details.</dd></dl>
<p>2) Initialize and enable the driver: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="structcy__stc__lpcomp__config__t.html">cy_stc_lpcomp_config_t</a> lpcomp_cfg =</div><div class="line">{</div><div class="line">    .<a class="code" href="structcy__stc__lpcomp__config__t.html#a480331bf074a8da85d644604ccbd4be1">outputMode</a> = <a class="code" href="group__group__lpcomp__enums.html#ggabdb04cbeeda3390491f1927ec54754d9adad19119afec1d0ed744964d23b0f738">CY_LPCOMP_OUT_DIRECT</a>,</div><div class="line">    .hysteresis = <a class="code" href="group__group__lpcomp__enums.html#ggada8e5d16a9fcb0b9cbad23449cdf51aba912f47c14d6cad0f5e80d5d6bda30cd1">CY_LPCOMP_HYST_ENABLE</a>,</div><div class="line">    .power = <a class="code" href="group__group__lpcomp__enums.html#gga807c85d836c327c00a8a5ee52d6a93e6a507745f1da8cbc248a632429846d2e81">CY_LPCOMP_MODE_ULP</a>,</div><div class="line">    .intType = <a class="code" href="group__group__lpcomp__enums.html#ggab12edb4e44ead54254de2168b92b4213af25fc3387384b358a79e93c314a9c884">CY_LPCOMP_INTR_BOTH</a></div><div class="line">};</div></div><!-- fragment --><div class="fragment"><div class="line">        <a class="code" href="structcy__stc__lpcomp__context__t.html">cy_stc_lpcomp_context_t</a> lpcomp_context;</div><div class="line"></div><div class="line">        <a class="code" href="group__group__lpcomp__functions.html#ga7631c5f5724fec57202a4046bd800477">Cy_LPComp_Init</a>(LPCOMP, <a class="code" href="group__group__lpcomp__enums.html#ggaf3944a03ab86845a63e0b8a2d29ca1b1aed5d3b09e83980258c7f166afea07147">CY_LPCOMP_CHANNEL_0</a>, &amp;lpcomp_cfg, &amp;lpcomp_context);</div><div class="line">        <a class="code" href="group__group__lpcomp__functions.html#gad4118045ce5fc150fb32f073a63756e5">Cy_LPComp_Enable</a>(LPCOMP, <a class="code" href="group__group__lpcomp__enums.html#ggaf3944a03ab86845a63e0b8a2d29ca1b1aed5d3b09e83980258c7f166afea07147">CY_LPCOMP_CHANNEL_0</a>, &amp;lpcomp_context);</div></div><!-- fragment --><p> 3) Configure the interrupt requests if the interrupt event triggering is needed. Additionally, enable the global interrupts and initialize the referenced interrupt by setting the priority and the interrupt vector using the <a class="el" href="group__group__sysint.html">SysInt (System Interrupt)</a> driver API: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> lpcomp_isr(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(0U != (<a class="code" href="group__group__lpcomp__macros.html#ga991c66cb97ce4ec47edbfb0d6313abe2">CY_LPCOMP_CHANNEL0_INTR</a> &amp; <a class="code" href="group__group__lpcomp__functions.html#ga912aa8e2ad1b4ffaf8f4ff506969752b">Cy_LPComp_GetInterruptStatusMasked</a>(LPCOMP)))</div><div class="line">    {</div><div class="line">        <a class="code" href="group__group__lpcomp__functions.html#ga5197f02cfc236a0280d7d18e52cfb916">Cy_LPComp_ClearInterrupt</a>(LPCOMP, <a class="code" href="group__group__lpcomp__macros.html#ga991c66cb97ce4ec47edbfb0d6313abe2">CY_LPCOMP_CHANNEL0_INTR</a>);</div><div class="line">        <a class="code" href="group__group__gpio__functions__gpio.html#ga849c813d6771bf8d3c59b89b28a07bca">Cy_GPIO_Write</a>(GPIO_PRT2, 0, <a class="code" href="group__group__lpcomp__functions.html#gadc91cd80afbb17ee87fbd38dd963ec2e">Cy_LPComp_GetCompare</a>(LPCOMP, <a class="code" href="group__group__lpcomp__enums.html#ggaf3944a03ab86845a63e0b8a2d29ca1b1aed5d3b09e83980258c7f166afea07147">CY_LPCOMP_CHANNEL_0</a>));</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">        <span class="comment">/* Enable global interrupts */</span></div><div class="line">        __enable_irq();</div><div class="line"></div><div class="line">        <span class="comment">/* Configure LPComp interrupt */</span></div><div class="line">        <a class="code" href="group__group__lpcomp__functions.html#ga68279aa775be86f1906f07cb077e67e4">Cy_LPComp_SetInterruptMask</a>(LPCOMP, <a class="code" href="group__group__lpcomp__enums.html#ggaf3944a03ab86845a63e0b8a2d29ca1b1aed5d3b09e83980258c7f166afea07147">CY_LPCOMP_CHANNEL_0</a>);</div><div class="line"></div><div class="line">        <a class="code" href="group__group__sysint__functions.html#ga6628d90db5d0e0e8801535e2f1519266">Cy_SysInt_SetVector</a>(lpcomp_interrupt_IRQn, lpcomp_isr);</div><div class="line">        NVIC_ClearPendingIRQ(lpcomp_interrupt_IRQn);</div><div class="line">        NVIC_EnableIRQ(lpcomp_interrupt_IRQn);</div></div><!-- fragment --><p> 4) The comparator output can be monitored using the <a class="el" href="group__group__lpcomp__functions.html#gadc91cd80afbb17ee87fbd38dd963ec2e" title="Returns a non-zero value when the voltage connected to the positive input is greater than the negativ...">Cy_LPComp_GetCompare()</a> function, using the comparator interrupt (if the interrupt is enabled) or using GPIO pin (if routed directly through the HSIOM).</p>
<dl class="section note"><dt>Note</dt><dd>The interrupt is not cleared automatically - it is the user's responsibility. The interrupt is cleared by writing "1" in the corresponding interrupt-register bit-position. The preferred way to clear interrupt sources is using the <a class="el" href="group__group__lpcomp__functions.html#ga5197f02cfc236a0280d7d18e52cfb916" title="Clears LPCOMP interrupts by setting each bit. ">Cy_LPComp_ClearInterrupt()</a> function.</dd>
<dd>
Individual comparator interrupt outputs are ORed together as a single asynchronous interrupt source before they are sent out and used to wake up the system in Low-power mode.</dd></dl>
<h1><a class="anchor" id="group_lpcomp_lp"></a>
Low Power Support</h1>
<p>The driver provides the callback functions to facilitate the Low-power mode transition. The callback <a class="el" href="group__group__lpcomp__functions__syspm__callback.html#ga1db6050e8d02b0117098b1afcf485d1a">Cy_LPComp_DeepSleepCallback</a> must be called during the execution of <a class="el" href="group__group__syspm__functions__power.html#gae24d1a7d457b5355858651a213c2f4cd">Cy_SysPm_CpuEnterDeepSleep</a>.</p>
<p>To trigger the callback execution, the callback must be registered before calling the mode transition function. Refer to <a class="el" href="group__group__syspm.html">SysPm (System Power Management)</a> driver for more information about low-power mode transitions.</p>
<h1><a class="anchor" id="group_lpcomp_more_information"></a>
More Information</h1>
<p>Refer to the appropriate device technical reference manual (TRM) for a detailed description of the registers.</p>
<h1><a class="anchor" id="group_lpcomp_Changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.0.1 </td><td>Update the paths to the code snippets. </td><td>PDL structure update.  </td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__lpcomp__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__lpcomp__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__lpcomp__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__lpcomp__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__lpcomp__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__lpcomp__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__lpcomp__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__lpcomp__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>CAT2 Peripheral Driver Library</b> by <b>Infineon Technologies</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
